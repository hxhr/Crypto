# 简易PKI系统

该项目实现了一个简化的公钥基础设施（PKI）系统，使用了 RSA 加密算法。主要功能包括证书的生成、签名、验证和存储。

## 项目结构

### 头文件 (`h`)

- **`Certificate.h`**：定义了 `TA`（信任机构）和 `Client`（客户端）类，负责证书的创建和管理。`TA` 类用于生成并签署证书，而 `Client` 类则用于处理客户端的证书请求及验证。
  
- **`CertificateRepository.h`**：定义了 `CertificateRepository` 类，该类实现了证书库的功能，用于存储和查询证书路径。

- **`RSA.h`**：定义了 `RSA` 类，负责生成 RSA 公私钥对，并提供加密和解密的功能。

- **`RsaSig.h`**：定义了 `RsaSig` 类，用于生成和验证 RSA 签名。

### 源文件 (`cpp`)

- **`Certificate.cpp`**：实现了 `Certificate.h` 中声明的 `TA` 和 `Client` 类的具体功能，包括证书的生成、签名和验证逻辑。

- **`CertificateRepository.cpp`**：实现了 `CertificateRepository` 类的具体功能，包括存储证书和查询证书路径的逻辑。

- **`RSA.cpp`**：实现了 `RSA.h` 中声明的 `RSA` 类的具体功能，包括公私钥的生成和加解密操作。

- **`RsaSig.cpp`**：实现了 `RsaSig.h` 中声明的 `RsaSig` 类的具体功能，包括 RSA 签名的生成和验证。

- **`main.cpp`**：项目的主测试程序。该文件包含了对上述功能的示例测试，包括信任机构的证书生成、客户端证书请求和验证的完整流程。

## 测试说明

在 `main.cpp` 文件中，主要实现了以下测试功能：

1. 创建根 CA 并自签名生成证书。
2. 根 CA 为下级 CA（CA1 和 CA2）生成并签发证书。
3. CA1 和 CA2 为客户端（如 Alice、Bob 和 Eve）生成并签发证书。
4. 将所有生成的证书存储在证书库中。
5. 模拟客户端之间的通信，其中包括查询对方证书路径并验证证书的有效性。
6. 使用 RSA 公钥验证消息的签名，确保消息的完整性和来源可信度。

## 使用说明

1. 下载或克隆项目代码到本地。
2. 使用支持 C++ 的 IDE 打开项目（如 Visual Studio）。
3. 编译并运行项目，查看控制台输出的测试结果。

